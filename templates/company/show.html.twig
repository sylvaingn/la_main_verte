{% extends 'base.html.twig' %}

{% block title %}Company{% endblock %}

{% block body %}

{# Affichage infos producteur #}

<h1>{{company.name}}</h1>

<div class="card mb-3">
    <img src="{{ asset('assets/img/etalage primeur.jpg') }}" class="card-img-top" style="height: 80px; width: 100px;"
        alt="...">
    <div class="card-body">
        <h5>{{company.averageRating|round(1, 'floor')}}{% if company.averageRating is not null %}/10{% endif %}</h5>
        <p class="card-text">{{company.description}}</p>
    </div>
</div>

<h4>Liste des produits</h4>

<table class="table table-dark">
    <thead>
        <tr>
            <th scope="col">Produits</th>
            <th scope="col">Quantités dispos</th>
            <th scope="col">Prix unitaire</th>
            <th scope="col">Ajouter au panier</th>
            <th scope="col">Retirer du panier</th>
        </tr>
    </thead>
    <tbody>
            {% for stock in stocks %}
                <tr>
                    {# {% if stock.description == "" %} #}
                        <td>{{ stock.product.name}}</td>
                    {# {% else %} #}
                        {# <td>{{ stock.description }}</td> #}
                    {# {% endif %} #}
                    {% if stock.quantity == 0 %}
                        <td><i>épuisé</i></td>
                    {% else %}                        
                        <td>{{ stock.quantity }} {{ stock.conditioning }}</td>
                    {% endif %}
                    <td>{{ stock.price }} €</td>
                    {% if stock.quantity == 0 %}
                    <td colspan="2"> </td>
                    {% else %}
                    <td>
                        <a href="{{ path('cart_add', {'id': stock.id}) }}"><i class="fa fa-cart-plus" style='font-size:24px'></i></a>
                    </td>
                    <td>
                        <a href="{{ path('cart_remove', {'id': stock.id}) }}"><i class="fa fa-trash-o" style='font-size:24px'></i></a>
                    </td>
                    {% endif %}
                </tr>
            {% else %}
                <tr>
                    <td colspan="5">aucun produit disponible</td>
                </tr>
            {% endfor %}
    </tbody>
</table>

{# Affichage carte Google avec pointeur #}

{# <div class="card mb-3">
    <div class="card-body">
        <br>
        <br>
        <h5>Google Map</h5>
        <br>
        <br>
    </div>
</div> #}




{# Affichage commentaires producteur #}

<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">Notes</th>
            <th scope="col">Commentaires</th>
        </tr>
    </thead>
    <tbody>
        
        {% for review in reviews %}

        <tr>
            <th scope="row">{{review.rating}}</th>
            <td>{{review.comment}}</td>
        </tr>

        {% endfor %}

    </tbody>
</table>


{{ include('review/_form.html.twig') }}


<a href="{{ path('company_index') }}">back to list</a>

{# <a class="btn btn-primary" href="{{ path('company_edit', {'id': company.id}) }}">edit</a> #}

{# {{ include('company/_delete_form.html.twig') }} #}


{% endblock %}